(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(14),a=n.n(o),i=n(10),s=n(22),d=r.a.createContext(),l=d.Provider,u=d.Consumer,j=n(17),b=n(18),O=function(){function e(){Object(j.a)(this,e),this.defaultData=[{id:1,title:"JavaScript. Detailed guide",author:"David Flanagan",price:3500,total:3500,count:1,image:"../img/book1.jpg"},{id:2,title:"Client-Server Web Apps with JavaScript and Java",author:"Casimir Saternos",price:3200,total:3200,count:1,image:"../img/book2.jpg"}]}return Object(b.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t){return setTimeout(t(e.defaultData),700)}))}}]),e}(),h=n(3),f=n(1),x=function(){return Object(f.jsx)("div",{children:"About Book Page"})},m=function(){return Object(f.jsx)("div",{children:"Cart Page"})},v=(n(41),function(e){var t=e.count,n=e.price;return Object(f.jsxs)("div",{className:"cart",children:[Object(f.jsx)("a",{className:"cart-icon",href:"#",children:Object(f.jsx)("i",{className:"fa fa-cart-plus"})}),Object(f.jsxs)("span",{className:"cart-status",children:[t," items ($",n,")"]})]})});v.defaultProps={count:3,price:6700};var p=v,k=(n(42),function(){return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("h1",{className:"logo",children:"ReStore"}),Object(f.jsx)(p,{})]})}),g=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},B=n(5),N=function(){return function(e){return function(t){return Object(f.jsx)(u,{children:function(n){return Object(f.jsx)(e,Object(B.a)(Object(B.a)({},t),{},{bookStoreService:n}))}})}}},C=function(e){return{type:"BOOK_ADDED_TO_CART",payload:e}},_=function(e,t){return function(){e({type:"FETCH_BOOKS_REQUEST"}),t.getBooks().then((function(t){return e({type:"FETCH_BOOKS_SUCCESS",payload:t})})).catch((function(){return e({type:"FETCH_BOOKS_FAILURE"})}))}},S=(n(43),function(e){var t=e.book,n=e.onAddedBook,c=t.id,r=t.title,o=t.author,a=t.price,i=t.image;return Object(f.jsxs)("div",{className:"card text-dark bg-light border-dark mb-3",children:[Object(f.jsx)("div",{className:"card-header",children:r}),Object(f.jsx)("img",{src:i,className:"card-img-top",alt:"Book Image",style:{maxHeight:"700px",maxWidth:"538px"}}),Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title",children:r}),Object(f.jsx)("h5",{className:"card-subtitle mb-2 text-muted",children:o}),Object(f.jsxs)("h3",{className:"card-text",children:[a," RUB"]}),Object(f.jsx)("button",{className:"btn btn-success btn-lg",style:{marginTop:"20px"},onClick:function(){return n(c)},children:"Add to Cart"})]})]})}),E=(n(44),function(){return Object(f.jsx)("div",{className:"loading-indicator",children:Object(f.jsx)("div",{className:"loadingio-spinner-double-ring-quh3a49vtmd",children:Object(f.jsxs)("div",{className:"ldio-9opildb5qm5",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{children:Object(f.jsx)("div",{})}),Object(f.jsx)("div",{children:Object(f.jsx)("div",{})})]})})})}),y=(n(45),function(){return Object(f.jsxs)("div",{className:"error-indicator",children:[Object(f.jsx)("div",{className:"loadingio-spinner-magnify-xvi2eomm9dk",children:Object(f.jsx)("div",{className:"ldio-djr5te9pz2p",children:Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})})})}),Object(f.jsx)("span",{className:"error-message",children:Object(f.jsx)("div",{children:"Something has gone wrong!"})})]})}),A=function(e){var t=e.books,n=e.onAddedBook;return Object(f.jsx)("div",{className:"row",children:t.map((function(e){return Object(f.jsx)("div",{className:"col-sm-6",children:Object(f.jsx)(S,{book:e,onAddedBook:n})},e.id)}))})},R=g(N(),Object(i.b)((function(e){return{books:e.books,loading:e.loading,error:e.error}}),(function(e,t){var n=t.bookStoreService;return{fetchBooks:_(e,n),bookAddedToCart:function(t){return e(C(t))}}})))((function(e){var t=e.books,n=e.loading,r=e.error,o=e.fetchBooks,a=e.bookAddedToCart;return Object(c.useEffect)((function(){return o()}),[o]),n?Object(f.jsx)(E,{}):r?Object(f.jsx)(y,{}):Object(f.jsx)(A,{books:t,onAddedBook:a})})),T=n(30),D=(n(46),function(e){var t=e.columns,n=e.data;return Object(f.jsxs)("div",{className:"shopping-table",children:[Object(f.jsx)("h2",{className:"table-title",children:"Your Order"}),Object(f.jsxs)("table",{className:"table table-bordered border-primary",children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{className:"table-primary",children:t})}),Object(f.jsx)("tbody",{children:n})]})]})}),F=Object(i.b)((function(e){return{books:e.cartBooks}}),(function(e){return{onAddedBook:function(t){return e(C(t))},onRemovedBook:function(t){return e({type:"BOOK_REMOVED_FROM_CART",payload:t})},onDeletedBook:function(t){return e({type:"ALL_BOOK_REMOVED_FROM_CART",payload:t})}}}))((function(e){var t=e.books,n=e.onAddedBook,r=e.onRemovedBook,o=e.onDeletedBook,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(c.useState)(t),r=Object(T.a)(n,2),o=r[0],a=r[1];return{sortedData:Object(c.useMemo)((function(){return null!==o&&e.sort((function(e,t){return e[o.field]<t[o.field]?"asc"===o.direction?-1:1:e[o.field]>t[o.field]?"asc"===o.direction?1:-1:0})),e}),[e,o]),requestSort:function(e){var t="asc";o&&"asc"===o.direction&&(t="desc"),a({field:e,direction:t})}}}(t),i=a.sortedData,s=a.requestSort,d=[{name:"id",label:"#"},{name:"title",label:"Book Title"},{name:"count",label:"Count"},{name:"price",label:"Total price"},{name:"action",label:"Action"}].map((function(e,t){var n=e.name,c=e.label;return Object(f.jsx)("th",{scope:"col",children:Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){return s(n)},children:c})},t)})),l=i.map((function(e,t){var c=e.id,a=e.title,i=e.count,s=e.total;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"row",children:c}),Object(f.jsx)("td",{children:a}),Object(f.jsx)("td",{children:i}),Object(f.jsx)("td",{children:s}),Object(f.jsx)("td",{children:Object(f.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Buttons",children:[Object(f.jsx)("button",{className:"btn btn-outline-success",onClick:function(){return n(c)},children:Object(f.jsx)("i",{className:"fa fa-plus"})}),Object(f.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return r(c)},children:Object(f.jsx)("i",{className:"fa fa-minus"})}),Object(f.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return o(c)},children:Object(f.jsx)("i",{className:"fa fa-trash-o"})})]})})]},t)}));return Object(f.jsx)(D,{columns:d,data:l})})),w=function(){return Object(f.jsxs)(r.a.Fragment,{children:[Object(f.jsx)(k,{}),Object(f.jsx)(R,{}),Object(f.jsx)(F,{}),Object(f.jsxs)(h.c,{children:[Object(f.jsx)(h.a,{path:"/shop-cart",exact:!0,component:m}),Object(f.jsx)(h.a,{path:"/about-book",exact:!0,component:x})]})]})},K=n(31),M=n(29),H=function(e){Object(K.a)(n,e);var t=Object(M.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(b.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(f.jsx)(y,{}):this.props.children}}]),n}(c.Component),U=n(16),L=n(11),q={books:[],cartBooks:[],loading:!0,error:!1},I=function(e,t,n){return-1===n?[].concat(Object(L.a)(e),[t]):0===t.count?[].concat(Object(L.a)(e.slice(0,n)),Object(L.a)(e.slice(n+1))):[].concat(Object(L.a)(e.slice(0,n)),[t],Object(L.a)(e.slice(n+1)))},J=function(e,t,n){var c=e.books,r=e.cartBooks,o=c.find((function(e){return e.id===t})),a=r.findIndex((function(e){return e.id===t})),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=t.total,r=void 0===c?0:c,o=t.count,a=void 0===o?0:o;return Object(B.a)(Object(B.a)({},e),{},{total:r+n*e.price,count:a+n})}(o,r[a],n);return Object(B.a)(Object(B.a)({},e),{},{cartBooks:I(r,i,a)})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"FETCH_BOOKS_REQUEST":return Object(B.a)(Object(B.a)({},e),{},{books:[],loading:!0,error:!1});case"FETCH_BOOKS_SUCCESS":return Object(B.a)(Object(B.a)({},e),{},{books:c,loading:!1});case"FETCH_BOOKS_FAILURE":return Object(B.a)(Object(B.a)({},e),{},{books:[],error:!0});case"BOOK_ADDED_TO_CART":return J(e,c,1);case"BOOK_REMOVED_FROM_CART":return J(e,c,-1);case"ALL_BOOK_REMOVED_FROM_CART":var r=c,o=e.cartBooks.findIndex((function(e){return e.id===r})),a=e.cartBooks[o];return J(e,c,-a.count);default:return e}},V=Object(U.b)(P),Q=new O;a.a.render(Object(f.jsx)(c.StrictMode,{children:Object(f.jsx)(i.a,{store:V,children:Object(f.jsx)(H,{children:Object(f.jsx)(l,{value:Q,children:Object(f.jsx)(s.a,{children:Object(f.jsx)(w,{})})})})})}),document.querySelector(".root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.2d6e8180.chunk.js.map